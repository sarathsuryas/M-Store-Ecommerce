

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Address</title>
  <link rel="stylesheet" href="/userassets/css/editAddress.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<body>
  <div class="container-xl px-4 mt-4">
    <!-- Account page navigation-->
    
    <hr class="mt-0 mb-4">
    <div class="row">
       
        <div class="col-xl-12">
            
            <div class="card mb-4">
                <div class="card-header"><h6>Edit Address</h6></div>
                <div class="card-body">
      
                    <form action="/edit-address-data/<%= addressData._id %>" method="post" onsubmit="return editAddress()">
                        <!-- Form Group (username)-->
                        <div class="mb-3">
                            <label class="small mb-1" for="inputUsername">Username (your name provided in the address)</label>
                            <input class="form-control" id="username" type="text" placeholder="Enter your username" value="<%= addressData.name %>" name="username">
                            <span style="color:red" id="usernameError"></span>
                        </div>
                        <!-- Form Row-->
                        <div class="row gx-3 mb-3">
                            <!-- Form Group (first name)-->
                            <div class="col-md-6">
                                <label class="small mb-1" >Mobile Number</label>
                                <input class="form-control" id="mobile" type="text" placeholder="Enter your Mobile Number" value="<%= addressData.mobile %>" name="mobile">
                                <span style="color: red;" id="mobileError"></span>
                            </div>
                            <!-- Form Group (last name)-->
                            <div class="col-md-6">
                                <label class="small mb-1" >Pin code</label>
                                <input class="form-control" id="pinCode" type="text" placeholder="Enter your Pincode" value="<%= addressData.pinCode %>" name="pincode">
                                <span style="color:red" id="pincodeError"></span>
                            </div>
                        </div>
                        <!-- Form Row        -->
                        <div class="row gx-3 mb-3">
                            <!-- Form Group (organization name)-->
                            <div class="col-md-6">
                                <label class="small mb-1">Locality</label>
                                <input class="form-control" name="locality" id="locality" type="text" placeholder="Locality" value="<%= addressData.locality %>">
                                <span style="color: red;" id="localityError" ></span>
                            </div>
                            <!-- Form Group (location)-->
                            <div class="col-md-6">
                                <label class="small mb-1">Address</label>
                                <input class="form-control" id="address" type="text" placeholder="Enter your location" value="<%= addressData.homeAddress %>" name="address">
                                <span style="color: red;" id="addressError"></span>
                            </div>
                        </div>
                        <!-- Form Group (email address)-->
                        <div class="mb-3">
                            <label class="small mb-1" >City/District/Town</label>
                            <input class="form-control" id="cdt" type="text" placeholder="City/District/Town" value="<%= addressData.city %>" name="cdt">
                            <span style="color: red;" id="cdtError"></span>
                        </div>
                        <!-- Form Row-->
                        <div class="row gx-3 mb-3">
                            <!-- Form Group (phone text)-->
                            <div class="col-md-6">
                              <label class="small mb-1" for="selectState">Select State</label>
                              <select class="form-select" id="selectState" name="selectState">
                                  <option value="<%= addressData.state %>"  selected><%= addressData.state %></option>
                                  <option value="Andhra Pradesh">Andhra Pradesh</option>
                                  <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                  <option value="Assam">Assam</option>
                                  <option value="Bihar">Bihar</option>
                                  <option value="Chhattisgarh">Chhattisgarh</option>
                                  <option value="Goa">Goa</option>
                                  <option value="Gujarat">Gujarat</option>
                                  <option value="Haryana">Haryana</option>
                                  <option value="Himachal Pradesh">Himachal Pradesh</option>
                                  <option value="Jharkhand">Jharkhand</option>
                                  <option value="Karnataka">Karnataka</option>
                                  <option value="Kerala">Kerala</option>
                                  <option value="Madhya Pradesh">Madhya Pradesh</option>
                                  <option value="Maharashtra">Maharashtra</option>
                                  <option value="Manipur">Manipur</option>
                                  <option value="Meghalaya">Meghalaya</option>
                                  <option value="Mizoram">Mizoram</option>
                                  <option value="Nagaland">Nagaland</option>
                                  <option value="Odisha">Odisha</option>
                                  <option value="Punjab">Punjab</option>
                                  <option value="Rajasthan">Rajasthan</option>
                                  <option value="Sikkim">Sikkim</option>
                                  <option value="Tamil Nadu">Tamil Nadu</option>
                                  <option value="Telangana">Telangana</option>
                                  <option value="Tripura">Tripura</option>
                                  <option value="Uttar Pradesh">Uttar Pradesh</option>
                                  <option value="Uttarakhand">Uttarakhand</option>
                                  <option value="West Bengal">West Bengal</option>
                              </select>

                            <span style="color: red;" id="stateError"></span>
                          </div>
                          
                            <!-- Form Group (birthday)-->
                            
                            <div class="col-md-6">
                              <label class="small mb-1" >Alternate Phone</label>
                              <input class="form-control" id="altPhone" type="text"  name="altPhone" placeholder="Alternate Phone Number" value="<%= addressData.altPhone %>">
                              <span style="color: red;" id="altError"></span>
                          </div>
                        </div>
                        <!-- Save changes button-->
                        <button class="btn btn-primary" type="submit"  >Save changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function editAddress() {
      // Reset previous error messages
      resetErrors();
  
      // Basic form validation
      const username = document.getElementById('username').value.trim();
      const mobile = document.getElementById('mobile').value.trim();
      const pinCode = document.getElementById('pinCode').value.trim();
      const locality = document.getElementById('locality').value.trim();
      const address = document.getElementById('address').value.trim();
      const cdt = document.getElementById('cdt').value.trim();
      const selectState = document.getElementById('selectState').value.trim();
      const altPhone = document.getElementById('altPhone').value.trim();
  
      // Validate each field
      if (!isValidText(username)) {
        showError('usernameError', 'Please enter your username.');
        return false;
      }
  
      if (!mobile || !/^\d{10}$/.test(mobile)) {
        showError('mobileError', 'Please enter a valid 10-digit mobile number.');
        return false;
      }
  
      if (!pinCode || !/^\d{6}$/.test(pinCode)) {
        showError('pincodeError', 'Please enter a valid 6-digit pin code.');
        return false;
      }
  
      if (!isValidText(locality)) {
        showError('localityError', 'Please enter your locality.');
        return false;
      }
  
      if (!isValidText(address)) {
        showError('addressError', 'Please enter your address.');
        return false;
      }
  
      if (!isValidText(cdt)) {
        showError('cdtError', 'Please enter your city/district/town.');
        return false;
      }
  
      if (!selectState) {
        showError('stateError', 'Please select your state.');
        return false;
      }
  
      if (altPhone && !/^\d{10}$/.test(altPhone)) {
        showError('altError', 'Please enter a valid 10-digit alternate phone number or leave it blank.');
        return false;
      }
  
      // If all validation passes, the form will be submitted
      return true;
    }

    function isValidText(value) {
    // Allow only letters and spaces
    return /^[A-Za-z\s]+$/.test(value);
  }

  
    function showError(elementId, errorMessage) {
      document.getElementById(elementId).textContent = errorMessage;
    }
  
    function resetErrors() {
      const errorElements = document.querySelectorAll('[id$="Error"]');
      errorElements.forEach(element => {
        element.textContent = '';
      });
    }




  </script>
  


</body>
</html>